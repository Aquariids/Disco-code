---
title: 'Webpack'
id: 0
# category: ''
---

## Что такое webpack
Вебпак - это сборщик модулей, он анализирует модули приложения и собирает их в один или более бандл(bundle). 
В практических уроках далее я буду использовать `webpack`, поэтому разбираемся с ним заранее.

### Установка и запуск
Для начала нужно инициализировать `npm` командой `npm init`.<br/>
Для установки веб пака используем команду:
```
npm i webpack webpack-cli -D
```
- `webpack` - это самое главное, сам собрщик
- `webpack-cli` - это пакет для запуска вебпака из командной строки.

Для базового запуска `webpack` используем команду:
```javaScript
npx webpack
```
Дальше при настройке вебпака мы поговорим как лучше запускать его и как создать свою удобную команду с блэкджеком.

### Режимы работы
У webpack есть два режима работы
1. Это использование стандарнтых заводских настроек.
   >Когда мы запускаем проект без `webpack.config.js` для работы вебпака у нас должен быть главный файл который принимает все импорты  и в таком режиме работы он обязательно должен называться `index.js` и находиться в папке `src` -  `src/index.js`.
2. Это когда мы сами настраиваем проект с нуля.
   > Все же в реальных проектах всегда используется `webpack.config.js`  с помощью которого мы можем сами все гибко настроить.

## Настройка webpack.config.js
Создаем в корне проекта файл `webpack.config.js` и помещаем в него этот код:
```javaScript
'use strict';

let path = require('path'); // техническая переменная для правильной работы c путями

module.exports = {
  mode:'development', // мод в каком режиме мы работаем
   entry: './src/index.js', // точка входа
   output: { // точка выхода
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
   },
   watch:true, // позволяет автоматически собирать проект при изменениях
   devtool:'source-map', // хранит наши исходные файлы
   module:{}, // тут будут лоадеры
   plugins:[], // тут будут плагины
};

```
### Разбираем каждое свойство подробнее
* `mode`
  >Свойство `mode` имеет два режима `development` и `production`.
  >>`development` - это режим разработки, в таком режиме сборка будет происходить быстрее. Этот режим не сильно оптимизирует ваш код разными плагинами. Этот режим нужен для процесса работы, а когда уже закончим проект, то ставим в `production`
  ```javaScript
  mode:'development',
  ```
  >>`production` - Это режим для конечной сборки продукта, если не указывать `mode`, то этот режим ставится автоматически, он сжимает код на столько на сколько возможно и делает его совершенно нечитабельным, но оптимизированным
    ```javaScript
  mode:'prodaction',
  ```
* `entry`
  > Свойство `entry` просто указывает входную точку, тот файл с которого мы будем начинать. В варианте где мы использовали вебпак без конфига, такой файл является `index.js`. Обычно это такой файл, где вы прописываете все импорты, файл который собирает все модули в одном месте.
```javaScript
   entry: './src/index.js', // мы тут можем указать путь к нашему файлу и все, необязательно index.js

   entry: [ // для двух и более файлов можно сделать массив
   './src/index.js',
   './script.js' 
     ],
```
* `output`
  >Здесь мы указываем имя файла в котором будет храниться весь минифицированный код из модулей и путь где он будет лежать.
```javaScript
 output: {
      filename: 'bundle.js', // имя файла на выходе
      path: path.resolve(__dirname, 'dist') // путь 
      // __dirname - позволяет получить корень нашей папки
      // dist - это какая папка будет создана, например можно сделать так '/dist/js' 
   },
```
* `watch`
    > Это свойство в позиции `true` просто позволяет в автоматическом режиме следить за проектом и пересобирать его на ходу, нам не придется каждый раз писать `npx webpack`. Это свойство можно и не ставить в конфиге.
    В `package.json` в поле `scripts` мы можем создать свой скрипт для запуска и слежения.
```javaScript
"scripts": {
    "build": "webpack",
    "start": "webpack --watch"
  },
  // в таком случае запускается проект не через npx, а через npm
  // npm build - просто соберет проект как и npx webpack
  // npm start - соберет проект и запустит сразу watch
```
* `devtool`
   > У `devtool` есть разные настройки, но в основном всегда используется `source-map`. Это свойство позволяет нам сохранять исходный код.
   В браузере зайдя в инспектор кода на вкладку source мы можем посмотреть исходные файлы. Они будут на вкладке которая будет иметь имя вашего проекта из `package.json` , если раскрыть вкладу, вы увидите исходные файлы.
```javaScript
 devtool:'source-map', 
```

<div className='container-img'> <span className="img"> ![console.log](/images/Content/Js/source-map.png) </span></div>


## Плагины и лоадеры для webpack
