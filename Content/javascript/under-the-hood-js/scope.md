---
title: 'Scope & scope chain'
id: 2
category: 'under-the-hood-js'
date: '17.01.2022'
prev: '/js/under-the-hood-js/call-stack'
---


## Концепции scope и что это?

* `Scoping` - <b>область видимости</b>. Относится к доступности или видимости переменных. То есть, где мы можем получить <b>доступ</b> к переменной.

* `Lexical scoping`(Лексическая область видимости): контролируется размещением функций и блоков в коде. Это означает, что дочерние функции лексически связаны с контекстом выполнения их родителей и дочернии функции будут иметь доступ к переменным функции родителя. Лексическую область иногда также называют статической областью.

* `Scope`(Область действия): это среда или пространство в которой объявлена определенная переменная. В случае с функциями это `окружение переменных`. Существует глобальная область действия, область действия функций и облатсь действия блока.  

* `Scope of a variable`(Область действия переменной): область кода в которой можно получить доступ к определенной переменной.

Для описания всех этих понятий и концепций используется одно слово `scope`. Но у всех этих понятий, есть небольшие различия. Например когда мы говорим про `scope of a variable` мы подразумеваем доступность конкретной переменной в программе. Или когда мы говорим про `lexical scoping` мы сразу понимаем, что речь идет о доступе дочерней функции к переменным родительской. Мы еще раз вернемся к этим понятиям в практической части.

## Виды scope
Как мы уже ранее сказали, существует три вида области действия, сейчас разберем их подробнее.

### Global scope
Глобальная область действия относится к коду верхнего уровня.
* Переменные вне любой функции или блока.
* Переменные, объявленные в глобальном `scope`, доступны <b>везде</b>

```javaScript
const hello = 'hello'; // глобальная переменная
console.log(hello) // hello

function hi() {
    console.log(hello) // переменная доступна
}

hi() // hello 
```
### Function scope(local scope)
Каждая функция образует `scope` функций. Это как бы в противоположность глобальному `scope` поэтому и называется так же локальным `scope`.

* Переменные доступны только <b>внутри функции не</b> снаружи.
* Если вы попытаетесь получить доступ к любой переменной, определенной внутри функции, извне или из другой функции, вы получите ошибку.

```javaScript
function hi() {
    const hello = 'hello';
    console.log(hello);
    return hello;
}
hi();  // hello

// если попробуем снаружи, то получим ошибку
console.log(hello) // ReferenceError: hello is not defined
```
### Block scope(es6)
Раньше только функции могли создавать свой `scope`, но начиная с `es6`, `scope` имеют любые блоки кода.

* Переменные доступны только внутри <b>блока кода</b>.
* Это <b>применимо только</b> к перемнным <b>let</b> и <b>const</b>.

До `es6` существовал только глбальный `scope` и `scope` функций. Переменные `var` была как раз переменной области действия функции. То есть `var` была доступна везде, кроме функций. А в `es6` появился `block scope` и переменные `const` и `let` - они переменные области действия блока. Они доступны только в рамках блока кода(цикл, функция, просто блок {} и тд).

```javaScript
if (true) { // блок кода
    const one = 1;
    let two = 2;
    var three = 3; // var будет доступна и извне
    console.log(one); // 1
    console.log(two); // 2
    console.log(three); // 3
}

console.log(one); // ReferenceError
console.log(two); // ReferenceError
console.log(three); // 3  наша переменная var
```
* Функции так же имеют <b>scope блока</b>, но только в <b>strict mode</b>
```javaScript
{ // блок кода
    function hi() {
        console.log('hi');
    }
}

// наша функция доступна
hi(); // hi
```
Но если мы будем использовать `"use strict"`, то мы не сможем вызвать функцию, так как она станет ограничена блоками кода.
```javaScript
"use strict";

{
    function hi() {

        console.log('hi');
    }
}

hi(); // ReferenceError
```
